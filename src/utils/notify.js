import{setupVue}from"../setup.js";import{reactive}from"https://unpkg.com/vue@3.2.37/dist/vue.esm-browser.js";const notifications=reactive([]);export function notify(i,t){notifications.push({message:i,time:Date.now(),duration:10,dismissable:!0,close:!1,...t})}function removeNotify(i){notifications?.[i]?.dismissable&&(notifications[i].close=!0,setTimeout((()=>notifications.splice(i,1)),200))}setupVue.notifications={data:()=>({int:void 0}),template:'\n    <div id="notifyarea">\n      <div\n        v-for="(notify, i) in notif"\n        class="notification"\n        :class="{\n          close: notify.close,\n        }"\n        :key="notify.time"\n        @click="removeNotify(notif.length - i - 1)"\n      >\n        {{notify.message}}\n      </div>\n    </div>\n  ',mounted(){this.int=setInterval((()=>{for(const[i,t]of this.notifications.entries())(Date.now()-t.time)/1e3>t.duration&&t.dismissable&&this.removeNotify(i)}),100)},beforeUnmount(){clearInterval(this.int)},computed:{notif(){return this.notifications.slice().reverse()}},setup:()=>({notifications:notifications,removeNotify:removeNotify})};
