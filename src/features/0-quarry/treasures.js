import{RESOURCES}from"../../components/resources.js";import{player}from"../../player.js";import{D}from"../../utils/break_eternity.js";import{format}from"../../utils/format.js";import{notify}from"../../utils/notify.js";import{obtainInventory}from"./inventory.js";import{getOreWorthMul,LAYER_DATA}from"./quarry.js";const TREASURE_DATA={greenPapers:{range:[0,1/0],rarity:1,worth:(r,t)=>D(1e3).pow(D(r).div(50)).mul(LAYER_DATA[t].health).mul(getOreWorthMul()).div(3),obtain(r,t){const e=this.worth(r,t);RESOURCES.greenPaper.add(e),notify("You have obtained "+format(e)+" Green Papers!")}},map:{range:[25,1/0],rarity:5,obtain(r){notify("You have obtained a new map at depth: "+format(r,0)+"!"),obtainInventory("map",{depth:r,freq:(1+Math.random()/8)**3,luck:(1+Math.random()/8)**2,health:(1+Math.random()/8)**2})}}};function generateTreasure(r){let t=[],e=Math.random();for(let[o,a]of Object.entries(TREASURE_DATA))D(r).lt(a.range[0])||D(r).gt(a.range[1])||1/e<a.rarity||t.push(o);return t}export function getTreasure(r,t){for(let e of generateTreasure(r))TREASURE_DATA[e].obtain(r,t);player.stats.treasures++}
